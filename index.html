<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - FBX loader - Nurbs</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div id="info">FBXLoader - Nurbs</div>

    <script type="module">
        import * as THREE from 'https://cdnjs.cloudflare.com/ajax/libs/three.js/0.180.0/three.module.min.js';

        import Stats from 'https://cdnjs.cloudflare.com/ajax/libs/stats.js/7/Stats.min.js';

        // Correct OrbitControls import for ES modules
        import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/controls/OrbitControls.js";

        // Correct FBXLoader import for ES modules
        import { FBXLoader } from "https://cdn.jsdelivr.net/npm/three@0.180.0/examples/jsm/loaders/FBXLoader.js";

        let camera, scene, renderer, stats;

        init();

        function init() {

            const container = document.createElement('div');
            document.body.appendChild(container);

            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2000);
            camera.position.set(2, 18, 28);

            scene = new THREE.Scene();

            // grid
            const gridHelper = new THREE.GridHelper(28, 28, 0x303030, 0x303030);
            scene.add(gridHelper);

            // stats
            stats = new Stats();
            container.appendChild(stats.dom);

            // model
            const loader = new FBXLoader();
            loader.load('fbx/mb.fbx', function (object) {
                scene.add(object);
            });

            renderer = new THREE.WebGLRenderer();
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setAnimationLoop(animate);
            container.appendChild(renderer.domElement);

            const controls = new OrbitControls(camera, renderer.domElement);
            controls.target.set(0, 12, 0);
            controls.update();

            window.addEventListener('resize', onWindowResize);

        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            renderer.render(scene, camera);
            stats.update();
        }

    </script>

</body>
</html>
